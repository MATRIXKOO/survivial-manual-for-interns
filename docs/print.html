<!DOCTYPE HTML>
<html lang="zh_CN" class="sidebar-visible no-js rust">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>survivial manual for interns</title>
        
        <meta name="robots" content="noindex" />
        
        


        <!-- Custom HTML head -->
        


        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        
        <link rel="icon" href="favicon.svg">
        
        
        <link rel="shortcut icon" href="favicon.png">
        
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        
        <link rel="stylesheet" href="css/print.css" media="print">
        

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        
        <link rel="stylesheet" href="fonts/fonts.css">
        

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        

        
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "rust";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('rust')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="interview.html"><strong aria-hidden="true">1.</strong> interview</a></li><li class="chapter-item expanded "><a href="first-four-weeks.html"><strong aria-hidden="true">2.</strong> first-four-weeks</a></li><li class="chapter-item expanded "><a href="team-dynamics.html"><strong aria-hidden="true">3.</strong> team-dynamics</a></li><li class="chapter-item expanded "><a href="rules.html"><strong aria-hidden="true">4.</strong> rules</a></li><li class="chapter-item expanded "><a href="tips.html"><strong aria-hidden="true">5.</strong> tips</a></li><li class="chapter-item expanded "><a href="so-you-are-writing-scripts.html"><strong aria-hidden="true">6.</strong> so-you-are-writing-scripts</a></li><li class="chapter-item expanded "><a href="glossary.html"><strong aria-hidden="true">7.</strong> glossary</a></li><li class="chapter-item expanded "><a href="prepare.html"><strong aria-hidden="true">8.</strong> prepare</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                        
                    </div>

                    <h1 class="menu-title">survivial manual for interns</h1>

                    <div class="right-buttons">
                        
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        
                        
                    </div>
                </div>

                
                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" name="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="如何通过面试"><a class="header" href="#如何通过面试">如何通过面试</a></h1>
<p>TODO</p>
<h1 id="四周内部培训"><a class="header" href="#四周内部培训">四周内部培训</a></h1>
<p>TODO 将目前我用过的培训内容添加到这里。</p>
<p>TODO 将 https://github.com/lazyparser/weloveinterns 中的内容搬运整合到这里。</p>
<p>https://missing.csail.mit.edu/</p>
<p>The Missing Semester of Your CS Education</p>
<p>Classes teach you all about advanced topics within CS, from operating systems to machine learning, but there’s one critical subject that’s rarely covered, and is instead left to students to figure out on their own: proficiency with their tools. We’ll teach you how to master the command-line, use a powerful text editor, use fancy features of version control systems, and much more!</p>
<p>以后作为LV2的入门教程了，有兴趣可以查缺补漏。</p>
<p>Schedule</p>
<pre><code>1/13: Course overview + the shell
1/14: Shell Tools and Scripting
1/15: Editors (Vim)
1/16: Data Wrangling
1/21: Command-line Environment
1/22: Version Control (Git)
1/23: Debugging and Profiling
1/27: Metaprogramming
1/28: Security and Cryptography
1/29: Potpourri
1/30: Q&amp;A
</code></pre>
<p>TODO: 回头我来搬运到B站</p>
<h1 id="贴发票基础财务知识"><a class="header" href="#贴发票基础财务知识">贴发票（基础财务知识）</a></h1>
<p>所有新入职员工或者实习生都需要掌握此项能力。</p>
<p>都需要找机会学会如何贴发票，按照部门的报销要求处理财务票证。</p>
<p>必须知晓增值税专用发票和普通发票的区别，自己保存好开票信息。</p>
<p>必须知道或知道如何快速确认需要购买的事项或花销需要的手续，是提前审批还是事后直接报销。</p>
<p>熟悉会计的基本术语。</p>
<h1 id="团队的动力学"><a class="header" href="#团队的动力学">团队的动力学</a></h1>
<p>TODO 添加更多PLCT内部运作的原理和过程。</p>
<ul>
<li>总体上即使是实习生，也是精英自治的。尤其是远程的实习生，没有自律能力是无法在PLCT生存的。</li>
<li>PLCT的人员大概分为领主、主力、新人。实习累计时间在1年以内的都属于新人。</li>
<li>按照项目进行组织管理，非常扁平。一般是每个项目由一位领主 lead。</li>
<li>每个实习生会加入一个具体的项目中进行工作。一般而言会指定一位 lord 作为 mentor，往往就是项目的负责人。</li>
<li>我们采用小团队制度，一般是1+3的模式（参考火影的最小战斗单位）。</li>
<li>团队每周三下午会举行技术分享。一般都会要求和鼓励实习生进行技术报告和分享。优秀的报告会被上传到B站公开。</li>
<li>PLCT的实习生每周需要缴纳周报。周报提交时间是每周三周例会之前。提交地点是团队大群。 all2all 广播。周报不用写的长篇大论，是有固定的模式：（1）完成了什么，子弹模式；（2）计划外和坏消息；（3）本周计划；（4）其它。</li>
<li>实习生按月观察实际交付产出。由mentor和ww负责观测。如果连续两周产出低于预期ww会进行1on1恳谈，如果没有改善的话正常会在一个月内劝退。即使是实习生，PLCT不养闲人。</li>
<li>全体lord每周一进行例行会议。讨论各个项目进展。</li>
<li>实习生的招募面试过程对全体PLCT成员可见。</li>
<li>全职员工的招募对全体PLCT领主可见。</li>
</ul>
<h1 id="工作守则速查"><a class="header" href="#工作守则速查">工作守则速查</a></h1>
<p>本节列举了一些在我的团队中工作默认遵守的原则（强制要求）。
绝大部分原则是不区分实习生（intern）和正式员工（staff）以及具有自治和指挥权的领主（lord）的。</p>
<p>我所组建和管理的团队，一般采用精英自治模式。
这要求每一位成员都具有高度的自主性、高度的技术能力和自我管理意识，同时能够同团队其他成员、以及整个团队实际要达到的目标出发进行事态分析和预测执行。</p>
<p>对于实习生而言，我内心并不想要降低要求。我相信优秀的人不是顿悟然后战斗力爆炸的，是通过长年累月的积累形成的。
注意，请注意，这里有一个误区。或者换个说法，现在我要开始揭示一个你可能从未认识到的事实：
这些我很珍视的品质，这种在劳动力市场上难能可贵的能力，并不需要任何超过平均值的智商、情商、数学功底、计算机功底、抑或其他任何需要痛苦自律才达到。
相反的，完全相反的，这些珍贵的品质，是需要对接下来我列出来的这些看起来微不足道的原则的遵守。</p>
<p>成为我的团队的一员，长期的那种，一个必须的前提是 <strong>Be Humble</strong>，谦卑。毕竟，
要相信只要遵守这些看起来是鸡毛蒜皮的守则就可以成为我刚才提到的顶级优秀的人才，并不是很容易。</p>
<h2 id="原则-01-任何会议均要有纪要"><a class="header" href="#原则-01-任何会议均要有纪要">原则 01 任何会议均要有纪要</a></h2>
<p>没有会议纪要的会议或谈话，不曾发生过。</p>
<h2 id="02-任何任务均要有计划和记录"><a class="header" href="#02-任何任务均要有计划和记录">02 任何任务均要有计划和记录</a></h2>
<p>内部系统没有记录的任务，没有发生过。</p>
<h2 id="03-learning-by-teaching"><a class="header" href="#03-learning-by-teaching">03 Learning By Teaching</a></h2>
<p>以下原则是对所有成员（实习生、学生和员工）普遍适用的：</p>
<ul>
<li>任何学习过程本身不是目标，也不能作为交付内容。（不然就应该是反过来我来收培训费啦😄）</li>
<li>未能讲授分享的知识，未能掌握。也就是说，没学会。</li>
</ul>
<h2 id="原则-04-没有版本控制的代码皆为尸体"><a class="header" href="#原则-04-没有版本控制的代码皆为尸体">原则 04 没有版本控制的代码皆为尸体</a></h2>
<p>任何离开 git repo 的代码，都是尸体（corpus）。</p>
<h2 id="原则-05-任何非官方下载的软件二进制都有后门"><a class="header" href="#原则-05-任何非官方下载的软件二进制都有后门">原则 05 任何非官方下载的软件二进制都有后门</a></h2>
<p>是真的。严谨百度网盘或者X网盘下载。如果下载速度慢或者被墙，找mentor。</p>
<h2 id="原则-06-严格遵守开源代码版权和license"><a class="header" href="#原则-06-严格遵守开源代码版权和license">原则 06 严格遵守开源代码版权和LICENSE</a></h2>
<p>做学生的时候，一般的工作流程是，有一个问题，分析，Google下代码，复制粘贴，修改。 It works，交作业。</p>
<p>但是做项目的时候是严格禁止直接复制粘贴的：没有标注引用出处的代码复制会被看成抄袭行为，
这在商业软件开发中是很严重的。这点尤其需要引起重视。</p>
<p>一般性的原则是，如果引用了他人的代码，首先需要检查是否LICENSE是跟你正在做的项目的LICENSE是相容的。</p>
<p>如果相容，那么引用的时候，需要注意保留作者的CREDITS。也就是说，如果是文件使用，本身有文件头声明，
那么要保留；如果是引用很少的片段，那么在注释中指出URL。如果是软件包使用，需要在CREDITS中进行致谢。</p>
<p>一般而言，模块级别的使用，放在 third_party 目录下，同时在CREDITS中致谢。而小的代码改动，则通常是自己理解了之后重写。</p>
<p>Jay Michaelson 的这篇文章是所有员工和实习生的必读：</p>
<p>There's no such thing as a free (software) lunch
What every developer should know about open source licensing</p>
<p><code>&lt;https://queue.acm.org/detail.cfm?id=1005066&gt;</code>_</p>
<h2 id="原则-07-只使用无改动的工具不要放在-git-repo-中"><a class="header" href="#原则-07-只使用无改动的工具不要放在-git-repo-中">原则 07 只使用、无改动的工具不要放在 git repo 中</a></h2>
<p>对于不修改只是用的软件，使用脚本自动下载和解压缩而不是放在 git repo。</p>
<p>例如交叉编译，要使用到 arm-linux-gcc-8 的某一版本的编译器。只是使用，不进行修改。这种情形是跟代码LICENSE没关系的，最好是按照脚本下载压缩文件，然后解压缩的形式。</p>
<p>这样【仓库中只有你写的下载-解压缩脚本，是没有这个编译器tar包的】。</p>
<pre><code class="language-shell">
    if 本地没有tar名字
        从URL下载
    # 保证有了
    if 有目标目录了
        删除这个目录
    tar tar文件 to 目标目录
</code></pre>
<p>一个有用的链接：
<code>&lt;https://tinylab.org/prebuilt-cross-toolchains/&gt;</code>_</p>
<p>（FIXME：原则07的交叉编译器的内容或许可以放在tips）</p>
<h2 id="原则-08-避免这个那个上次昨天等模糊指代"><a class="header" href="#原则-08-避免这个那个上次昨天等模糊指代">原则 08 避免「这个、那个、上次、昨天」等模糊指代</a></h2>
<p>模糊指代也是歧义指代，是指说的代词可以指向一个客体集合而不是唯一的客体对象。</p>
<p>一个检测方法是将提到了指代的话单独拎出来读一遍，看看是否可以脱离聊天上下文成立。</p>
<p>提到软件，最好有具体的版本号，或者tag，或者 commit id；</p>
<p>提到任务，最好有 issue number 或者 T id；</p>
<p>讨论问题，先在GitHub或y站进行记录，然后贴url，再开口讨论。</p>
<h2 id="原则-09-避免使用你在对话中"><a class="header" href="#原则-09-避免使用你在对话中">原则 09 避免使用「你」在对话中</a></h2>
<p>不管是中文语言还是英语还是日语，直接使用「你/you/あなた」都是带有隐含的对抗性质的。同时，「你」也会导致文字内容复制转发的时候会需要重新编辑。
改写的方式有很多种，要看具体的上下文。一般是有意识的规避几次就好了。一个通用做法是直接写名字，「我（名字）这边」怎么怎么样，「X这边负责」怎么怎么样，类似。</p>
<h2 id="原则-10-禁止在项目开始的时候就用话语给自己寻找退路"><a class="header" href="#原则-10-禁止在项目开始的时候就用话语给自己寻找退路">原则 10 禁止在项目开始的时候就用话语给自己寻找退路</a></h2>
<p>语言能够塑造人的行为，并在思维上给自己预期的失败寻找理由。</p>
<p>在项目的开始的时候，即使你的内心是这么想的，有些话也是不可以说出来的。以下是一些在PLCT被要求禁止说出来的话。</p>
<p><strong>例子1: 隐式推卸责任</strong></p>
<p>（当接到一个新任务和交付时间节点的时候）</p>
<p>「这个事情我之前没有接触过。我先看一看。」</p>
<p>实际上表达的潜台词：</p>
<p>「我不想对能否按时交付负责。我也不对结果负责。如果到了交货日期我交付不了，那要怪mentor自己。因为，我已经一开始就告诉mentor了。」</p>
<p><strong>例子2: 隐藏现状的说话方式</strong></p>
<p>当对一个事情进行解释的时候，使用了 「现状是A，因为B」的句式。在说出了A之后，非常快速的说「因为」。</p>
<p>这种情况，一定是在隐藏自己对A的陈述。</p>
<p>作为 mentor，应该立刻打断陈述，要求重复陈述A句，并仔细分析现状。不要分析原因。先确定现状。当出现这种情况的时候，就说明 <strong>一定是出现了坏消息</strong> 。
mentor/lord 是对项目交付最终负责的人，而不是 intern。 所以，身为 mentor 需要有这个能力。</p>
<p><strong>例子3: 模糊进展的说话方式</strong></p>
<p>在对工作进展进行描述的时候，采用大量的好像、可能、大概、应该是的说法去描述细节，不明确的表明进展情况。</p>
<p>这种情况是潜意识的逃避对目前的进展做说明，将进展掩盖在大量模棱两可的细节之中，会给合作伙伴和主管造成极大的困扰，造成实际进展不可见。
这种情况之下，通常进展已经不可控。</p>
<p>作为 intern 和 staff，以此为镜子自我观察。这几条例子都是非常、非常常见的，而且多数人已经形成了（很难改掉的）习惯。</p>
<p>在PLCT，不承担责任或者隐含的隐瞒坏消息是会被 wuwei 立刻抓住的。</p>
<p>要么改掉，要么离开PLCT。</p>
<h1 id="常用工作技巧"><a class="header" href="#常用工作技巧">常用工作技巧</a></h1>
<p>请容许我再次重申：对于我们这样的小团队而言，工作效率是团队能否存活下来的重要方面。</p>
<p>让我说的更直白一些：作为实习生，你的工作效率是否达到我的最低要求，直接决定了是否可以留在团队。
工作效率这里是指：第一，是否能够在DDL前完成交付；第二，培养你需要占用的我的时间，是否超过了我自己做这项工作的平摊时间。
平摊时间是指我的时间投入加上以后通过将同类（不需要我再投入时间指导或返工）工作 Offloading 给你而扣除的我的时间的期望（E）。</p>
<h2 id="如果做消化理解性质的技术分享"><a class="header" href="#如果做消化理解性质的技术分享">如果做消化理解性质的技术分享</a></h2>
<p>不管是全职员工还是实习生，我们都是非常强调技术报告能力和组内分享。</p>
<p>对于实习生而言，我的培养原则是「如果不能够报告清楚一项技术内容，那么就不能说真正理解了这项技术内容的内涵」（ref： <strong>原则03</strong> ）。</p>
<p>每个实习生平均两周就会被要求进行一次技术报告。刚加入团队的实习生一般是一周一次。</p>
<p>消化理解型的报告形式是，对于 <strong>已经有人做过整理或报告的技术内容，进行同样内容的报告</strong> 。</p>
<p>前人做过的技术报告的内容，包括：</p>
<ul>
<li>技术演讲（视频）</li>
<li>技术演讲的幻灯片（Slides）</li>
<li>技术博客文章，内容是完整的教程或者一步一步探索的过程。</li>
<li>教程（Tutorial）</li>
</ul>
<p>消化理解型报告的特点：</p>
<ol>
<li>报告人一定是一开始没有掌握需要报告的知识的。报告所用素材中的知识点的掌握，是报告的目标之一。</li>
<li>报告的听众中除了mentor，还有其他的初学者。技术报告的目的是能够让其他的初学者能够更加快速的掌握所需的知识。</li>
<li>往往是跟后续的代码开发任务直接相关。</li>
<li>一般通过在线视频会议形式进行报告，报告结果会留存作为团队的资料，或作为公开课（MOOC）开放出来。</li>
<li>一般从拿到自学任务到进行报告，时间不会超过一周（5天）。超过一周的工作需要进行拆分。</li>
</ol>
<p>做消化理解型技术报告的注意事项：</p>
<ol>
<li>名誉权和出处。参考原则06。消化理解型的报告基本上不会有新内容创新，都是第三方资料以及进一步检索得到的资料汇总。因此，对于前人工作的引用和致谢就分量更重。
a) 所有的资料都需要在PPT的最后给出参考出处。
b) 没有出处的不能引用；
c) 使用的截图等信息需要给出URL，在那一页引用，就在那一页的下方贴上URL。
d) 在做资料检索的时候就养成用一个 txt 文件或备忘录记载出处的习惯。
e) 不要漏掉任何 non-trivial 的引用。</li>
<li>拿到一个slides或者视频，并不是只看这一个材料，这只是开始。从一个素材出发，根据自己知识背景的不同，要进行不同的检索。例如，V8的Turbofan视频，要理解，就先要理解 JavaScript 语言的一般特点，需要知道 hidden class 到底什么意思，为什么会有 deoptimization。</li>
<li>要考虑受众。估计到有人可能不理解的术语和概念，要去查资料补充解释。PPT的字不能太小，颜色不能太刺眼，一页不要放太多内容。</li>
<li>最终交付和公开是用PDF的形式。因此不要在PPT中使用特效或者按键触发的特技。</li>
<li>默认报告会进行留存，用于后续的团队内部培训，根据需要有可能会以团队名义作为公开课开放。所以请务必注意质量。</li>
<li>使用团队指定的PPT模版。</li>
<li>第一页统一写上「日期、身份、姓名、邮箱、网址」。例如PLCT，就需要写 「软件所PLCT实验室实习生 某某某」，邮箱写「 https://github.com/isrc-cas 」</li>
<li>正式报告前最好提前一天交给mentor做review，提供一些建议。</li>
<li>当对外公开发布的时候，作者承担主要责任和荣誉。因此，第一页的名字需要写大一点 :-)</li>
</ol>
<p>正式的学术论文比较难，需要的背景知识比较多，因此并不算在消化理解型报告中，属于专门的论文讨论型报告。</p>
<h2 id="如何通过-github-的-pull-request-提交工作"><a class="header" href="#如何通过-github-的-pull-request-提交工作">如何通过 GitHub 的 Pull Request 提交工作</a></h2>
<p>实习生相关的工作有超过半数是在 GitHub 上公开进行的。
因此，如何熟练的使用 GitHub 的各种功能就显得对于效率的提升尤为重要。</p>
<h3 id="第一次提交pr的时候"><a class="header" href="#第一次提交pr的时候">第一次提交PR的时候</a></h3>
<p>如果是第一天在一个 GitHub 公开仓库上工作，那么遵守 fork-commit-push-PR 流程。具体流程可以 Google 到 GitHub 的官方文档或者其他优秀的教程。</p>
<p>需要注意的是，任何工作最好都不要在已经有的分支上进行。默认应该是每次工作开一个新的分支。</p>
<p>理由是如果是在已有的分支上进行commit（熟练实习生一般是偷懒或者习惯没有养成，新手实习生往往是不知道可以 checkout -b），
那么基本上是「单线程」的工作模式：在 master 分支上 commit 之后， push 到自己的 GitHub remote，
发起 PR，然后就什么都做不了了，等我来处理。</p>
<p>正确做法是每次工作都开一个新的分支来做。具体：</p>
<ol>
<li>Clone 下来 repo，切换到 master 或者 develop 分支（具体根据项目约定）。</li>
<li>从项目工作约定的分支 <code>checkout -b</code> 一个 local branch，分支名字可以是 <code>issueNNN</code>，对应任务的 id。</li>
<li>work，commit，work，commit，得到一个 commit list （有时候对应的patches叫 patch set）</li>
<li>push 到你自己的 GitHub remote 的新分支，注意是新分支，一般是跟本地分支名字相同（to save your time and life）。</li>
<li>登陆进入 GitHub 网页，看到你的分支，按照提示进行 Pull Request 操作。注意一定要选对目标分支，如果不明白，跟你的mentor询问。</li>
<li>Reviewer （一般是你的mentor）进行 code review。一般会提一些意见，要求修改。</li>
<li>如果要求修改，跳转到 3. 新的修改push到已经发起PR的分支之后不需要重复发起PR。</li>
<li>如果被merge，那么恭喜🎉同时要注意，现在开始你的工作流程就不一样了。继续往下看。</li>
</ol>
<h3 id="第-n1-次提交pr的时候"><a class="header" href="#第-n1-次提交pr的时候">第 N+1 次提交PR的时候</a></h3>
<p>OK，现在恭喜你，已经有了被 merge 的 PR。同时有一个坏消息告诉你：
从现在开始你 fork 出来的 repo 已经跟上游的 repo 不一样了。
虽然我曾经惊奇的发现过一个简单粗暴的解决办法【1】但是我并不打算告诉你。</p>
<p>正确的做法如下：</p>
<ol>
<li>进入已经 clone 的 repo。运行 <code>git remote -v</code>。预期看到一个 remote，名字是 origin， URL 是你的 GitHub repo，forked from repo AAA。</li>
<li>假设你的repo是从 repo AAA fork 出来的。例如 <code>&lt;https://github.com/lazyparser/becoming-a-compiler-engineer-codes&gt;</code>_ 运行 <code>git remote add lazyparser URL</code>。 这一步的作用是添加了一个新的 remote。 remote 的名字可以自己取一个，没有什么需要遵守的规律。</li>
<li>运行 <code>git fetch lazyparser</code> 将上游仓库的代码也 clone 一份下来到你的本地机器（跟 origin 同样保存在 .git 目录下）</li>
<li>本地创建一个分支，从你计划 push 的 branch。具体 <code>git help branch</code> or <code>git help checkout</code>。你会发现原来这些命令都可以带两个以上参数的。一条命令搞定。</li>
<li>work，commit，work，commit，得到一个 commit list （有时候对应的patches叫 patch set）</li>
<li>【注意】 push 到 <strong>你自己的</strong> GitHub remote 的新分支，注意是新分支，一般是跟本地分支名字相同（to save your time and life）。</li>
<li>其他都跟第一次类似了。</li>
<li>以后，如果PR遇到冲突，表示上游分支已经更新了，你需要更新自己的本地分支已解决冲突。解决方法是 git fetch 然后 git rebase。遇到冲突的时候，用 git status 查看哪些是冲突的，打开，一个个修改。搜索类似 <code>&lt;&lt;&lt;&lt;HEAD</code> 这样的字样。</li>
<li>修改（fix）了所有的conflicts之后，用 git rebase --continue 继续 rebase。</li>
<li>rebase完成之后，push到你自己的remote（一般是 origin）。如果已经发起了PR，那么PR应该自动更新了。</li>
</ol>
<p>###　其它情况</p>
<h4 id="使用ssh方式clone-仓库源码"><a class="header" href="#使用ssh方式clone-仓库源码">使用SSH方式clone 仓库源码</a></h4>
<p>使用SSH的方式下载仓库代码，需要个人在Github的 <code>SSH Keys设置 &lt;https://github.com/settings/keys&gt;</code>_ 里配置本机的SSH公钥。</p>
<p>否则无法clone 源码：</p>
<pre><code class="language-shell">
  $ git clone git@github.com:lazyparser/survivial-manual-for-interns.git
  Cloning into 'survivial-manual-for-interns'...
  Warning: Permanently added the RSA host key for IP address '52.74.223.119' to the list of known hosts.
  git@github.com: Permission denied (publickey).
</code></pre>
<h4 id="具体配置步骤如下"><a class="header" href="#具体配置步骤如下">具体配置步骤如下：</a></h4>
<ol>
<li>本地机器上配置SSH</li>
</ol>
<pre><code class="language-shell">
  $ ssh-keygen -t rsa -C &quot;1132021192@qq.com&quot;
  Generating public/private rsa key pair.
  Enter file in which to save the key (/home/chenjy/.ssh/id_rsa):
  Enter passphrase (empty for no passphrase):
  Enter same passphrase again:
  Your identification has been saved in /home/chenjy/.ssh/id_rsa.
  Your public key has been saved in /home/chenjy/.ssh/id_rsa.pub.
  The key fingerprint is:
  SHA256:aCPtc0lxXkzqlawcjDbxOTo7pgIrY1wS2ig6D4iio8k 1132021192@qq.com
  The key's randomart image is:
  +---[RSA 2048]----+
  |        .   .    |
  |         = * .   |
  |        = O *    |
  | .   . o O *     |
  |.o. . = S =      |
  |*.o. + o +       |
  |O oo  o *        |
  |X=. .  = .       |
  |*E.  ..          |
  +----[SHA256]-----+
</code></pre>
<blockquote>
<p>注：邮箱修改为自己的邮箱，Enter passphrase 默认回车即可。</p>
</blockquote>
<ol start="2">
<li>将公钥复制粘贴到 Github 的个人SSH Keys配置里。
产生的公钥一般为 <code>~/.ssh/id_rsa.pub</code></li>
</ol>
<pre><code class="language-shell">
    $ cat ~/.ssh/id_rsa.pub
    ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDa+LNRQuTAjMWZjRZ8d0CK9rZFjZZBQG2Q8UqBZpHQ7GQSBMdhO4mxRYYk/Zb7t7pMj3BpEyOOGKOFXRjic7ibREnki06TQ8LBolRAFDSBv6E4oOS5ei52mwh+NiL2mT7/5GdwZwgR2eDO22MxDRCHObFr2TBHkiThRs9NTi/28UPsy3MluyuPU/0IWZNwcjr1EKRL9qNOh9Ro+8GoEEb23A6sdG2zOjiV/VKiba8so5TqBt9ZFPvjnJtKINUb8TasusC49dSay5paDCJKnDCJQoDIiOn7ggg4ivkan2w9HK4lUK5oNHjQyQRPRiFBF+mm5DJJ7TW03dheOqZq6KPT 1132021192@qq.com
</code></pre>
<p>选中公钥复制粘贴到Github <code>[SSH Keys设置](https://github.com/settings/keys)</code>_ 的 NEW SSH key 的 key 里即可(Title自己命名)。</p>
<ol start="3">
<li>启动SSH代理并添加密钥</li>
</ol>
<pre><code class="language-shell">
    $ eval `ssh-agent -s`
    $ ssh-add
</code></pre>
<p>最后就可以使用SSH方式下载仓库文件了。比如：</p>
<pre><code class="language-shll">
    $ git clone git@github.com:lazyparser/survivial-manual-for-interns.git
</code></pre>
<p>TODO 由实习生遇到问题之后发起PR到这里。</p>
<p>在gitlab/github上如何寻找其他人的ID</p>
<p>使用中文输入法的时候，用户的ID提示不会在输入 @ 之后自动提示出来。
用英文输入法就不会遇到这个问题。所以在需要 @ 他人的时候，
一种方法是切换到英文输入法，另一种是用中文输入法输入了英文之后，
按以下退格键，这回出发github/gitlab的ID查找功能，给出正确的结果。</p>
<p>开task的时候，如何正确的写标题</p>
<p>比较常见错误是直接写（我要）做什么事情。这是错误的。想象下我每天看所有人的标题的时候能够看出来什么。
要求的做法是</p>
<p>【在X月X日提交YYY形式的交付物/完成YYY】</p>
<p>如果是一个 meta task，也就是说需要分解成不同的具体执行任务，
那么可以在标题的开头加上 <code>[meta]</code> 的字样。</p>
<h3 id="如何正确的提问"><a class="header" href="#如何正确的提问">如何正确的提问</a></h3>
<p>遇到问题以后，需要在y站开issue，简单而清楚的描述你遇到的问题并@你的上级或同事，最好配有截图或运行log以便他人帮助你解决。
注意不要在私下里询问技术问题，因为你遇到的问题别人也可能遇到，养成在y站中提问的好习惯，不仅可以帮助自己解决问题记录问题，也方便了其他实习同学学习参考。不要害怕去提问，问题也是宝贵的财富。发现问题，解决问题你才能变强。</p>
<h3 id="如何正确的报告bugs"><a class="header" href="#如何正确的报告bugs">如何正确的报告bugs</a></h3>
<p>项目运行时往往会产生各种bugs,明明是按说明来的，居然报错了...尝试半天没有解决的你准备向小组报告这个bug, 下面我们说明一下怎样正确报告bugs</p>
<ol>
<li>贴出error log—error log是最直观描述错误的材料，通常debug的过程都需要参考error log来进行，比如缺少安装某个库、多打了一个空格，error log可以直接给出大部分错误产生的原因，有利于其他人快速了解问题，给你修改建议。</li>
<li>描述bug出现的过程—一些简单的问题往往会因为没有清晰的描述而变得难以琢磨，“电脑突然黑屏了，进不去系统”，这种问题抛给任何一个专家都是令人头疼的，详细描述bug产生的过程和你做的操作，“更新了显卡驱动，然后电脑突然黑屏了，进不去系统”，更仔细的会描述帮助问题定位更加精确，有时多几个文字就可以大幅减少处理问题需要的时间。</li>
<li>提供bug的复现步骤——“能复现的bug都是好bug”，bug的复现步骤往往是判断bug属性的关键，如果bug能够复现，那么大家都可以参与到bug的解决中来，产生不同的思路和尝试，提出不同的解决方法，高效解决问题。（如果不能复现，那么这个bug对你来说是很危险的，请仔细查看有关说明和代码，必要时尝试不同机器。）</li>
<li>提供bug截图——无图无真相，请在报告bug时配上bug的截图或照片</li>
</ol>
<h2 id="如何正确的进行情报收集google-tips"><a class="header" href="#如何正确的进行情报收集google-tips">如何正确的进行情报收集（Google tips）</a></h2>
<p>学会利用专业平台进行资料搜索与问题交流，站在巨人的肩膀上去看远方。
Google的访问方式请自行百度学习VPS...，喝茶去了....</p>
<p>如何做进度报告</p>
<p>TBD</p>
<h2 id="zip文件的跨os操作注意事项"><a class="header" href="#zip文件的跨os操作注意事项">ZIP文件的跨OS操作注意事项</a></h2>
<p>压缩和解压缩的文件的时候注意，如果是zip文件，中文文件名可能会有乱码。</p>
<p>中文 windows 默认会使用 GBK 编码文件名，macOS 和 Linux 使用 UTF8。</p>
<p>解决方法在 Linux 下是使用可以指定文件名编码格式的解压命令行工具。</p>
<p>FIXME： macOS 下的我还没有找到。</p>
<p>所以保守的建议是：不要使用中文文件名，使用英文名。</p>
<p>##　如何正确简洁的复制B站的链接</p>
<p>URL 是浏览器跟WWW服务器之间的通信协议。</p>
<p>URL 中从问号开始的部分，参数，这部分参数，有时候是用来跟踪用户会话，而不是用来唯一标识资源的。</p>
<p>例如如果直接在B站搜索视频，可以得到类似</p>
<p>https://www.bilibili.com/video/av83277184?from=search&amp;seid=1289633595657602924</p>
<p>这样的链接。而实际上在B站，问号和问号后面的是不需要的，可以改成</p>
<p>https://www.bilibili.com/video/av83277184</p>
<p>在内部系统的时候贴的可以更加简洁。而对于B站而言，有一个约定俗称的编号系统就是av号，可以进一步所见为</p>
<p>av83277184</p>
<p>就足够唯一的表示出来要指称的对象了。在满足【原则08】的基础上做到了最大程度的简洁。</p>
<h2 id="中文输入法中全半角的正确使用"><a class="header" href="#中文输入法中全半角的正确使用">中文输入法中全、半角的正确使用</a></h2>
<p>日常工作中技术文档的撰写普遍会有中、英文夹杂的情况。在中文输入中，需要注意全角和半角概念。简单而言，
，在英文输入法中，一个英文字符和标点符号 （如 “a”）所占的位置是半角；而在中文输入中，一个汉字所占据
的位置等于两个半角，称为“全角”。默认状态下，英文输入法和中文输入法都是半角的设置，这意味这两种输入法
下所输入的英文字符、符号和数字，都只占据一个“半角”位置。</p>
<p>但是，在中文输入法下，可能会因为快捷键的误操作（如： shift + space ）导致全半角误切换，切换后，输入
的英文字符、符号和数字就会被当成汉字处理，看起来占据了“更宽”的位置，例如，从半角的“hello world123”
变成“ｈｅｌｌｏ　ｗｏｒｌｄ１２３”。这看起来是很别扭的，显得很不专业。</p>
<p>因此，在写文档时，一定要注意中文输入法中全、半角的正确使用。</p>
<h2 id="文档中粘贴超链接时前后务必加空格"><a class="header" href="#文档中粘贴超链接时前后务必加空格">文档中粘贴超链接时，前后务必加空格</a></h2>
<p>文档中的超链接是用来方便读者深入阅读的，读者要么直接点击链接跳转到相关链接，要么会选择复制粘贴链接
在浏览器中访问。无论是哪一种情况，编辑超链接时，在其前后加上空格都会极大地方便读者。</p>
<p>例如：</p>
<p>这样引用超链接 https://github.com/lazyparser/survivial-manual-for-interns 前后加空格是好的做法；</p>
<p>这样引用超链接https://github.com/lazyparser/survivial-manual-for-interns前后不加空格不是好的做法。</p>
<h2 id="写中英文夹杂的文档时在中文和英文之间加入空格"><a class="header" href="#写中英文夹杂的文档时在中文和英文之间加入空格">写中英文夹杂的文档时，在中文和英文之间加入空格</a></h2>
<p>这样做能够方便编辑器发挥其拼写检查功能。</p>
<h2 id="在使用word编辑文档时将常用的术语加入字典"><a class="header" href="#在使用word编辑文档时将常用的术语加入字典">在使用Word编辑文档时，将常用的术语加入“字典”</a></h2>
<p>这样做能够方便编辑器发挥其拼写检查功能。</p>
<h2 id="拿到新电脑后可以做的事从开箱到llvm"><a class="header" href="#拿到新电脑后可以做的事从开箱到llvm">拿到新电脑后可以做的事(从开箱到llvm)</a></h2>
<ol>
<li>
<p>进入系统后安装wsl/wsl2（默认ubuntu18.04），安装方法可以参考这篇官方文档 https://docs.microsoft.com/zh-cn/windows/wsl/install-win10</p>
</li>
<li>
<p>从开始菜单进入安装好的ubuntu系统中，进入 <code>/etc/apt</code> 更换软件源为国内源(以阿里云软件源为例),并更新软件列表:</p>
</li>
</ol>
<pre><code class="language-shell">
    $ cd /etc/apt
    $ vi sources.list
    //vim中输入 :%:cn.archive.ubuntu:mirrors.aliyun:g ,进行查找替换源
    $ sudo apt-get update
</code></pre>
<ol start="3">
<li>安装git、gcc、g++、cmake、make、ninja-build</li>
</ol>
<pre><code class="language-shell">
    $ sudo apt-get install git gcc g++ cmake make ninja-build
</code></pre>
<ol start="4">
<li>
<p>导入自己的ssh密钥(参考上方)</p>
</li>
<li>
<p>克隆llvm项目到本地(没速度的话尝试去掉https中的s，或者从y站镜像clone)</p>
</li>
</ol>
<pre><code class="language-shell">
    $ git clone https://github.com/llvm/llvm-project.git
</code></pre>
<ol start="6">
<li>进入llvm-project，准备编译llvm+clang(由于wsl只能运行在系统盘，注意你新电脑的系统盘大小，建议剩余100G)</li>
</ol>
<pre><code class="language-shell">    $ cd llvm-project
    $ mkdir build
    $ cd build
    $ cmake -G &quot;Unix Makefiles&quot; -DLLVM_ENABLE_PROJECTS=&quot;clang;libcxx;libcxxabi&quot; ../llvm
</code></pre>
<ol start="7">
<li>编译llvm，并记录你的编译用时</li>
</ol>
<pre><code class="language-shell">
    $ time make -j4
</code></pre>
<ol start="8">
<li>验证llvm是否安装成功(参考 https://llvm.org/docs/TestingGuide.html )</li>
</ol>
<pre><code class="language-shell">
    $ make check
</code></pre>
<p>【1】 我曾经指导过的一位实习生，每次要解决跟我（upstream）的repo不一致时候，都是删除自己的 fork，重新 fork。提交了多少次 PR 就删除了多少次。
更好玩的是，他还教会了周围的还处在迷茫中的实习生，一度成为了。</p>
<p>Remote rejected (shallow update not allowed) after changing Git remote URL</p>
<h2 id="如果是为了带宽问题用了-git-clone--depth-x-选项那么-push-到别的remote的时候会遇到"><a class="header" href="#如果是为了带宽问题用了-git-clone--depth-x-选项那么-push-到别的remote的时候会遇到">如果是为了带宽问题用了 <code>git clone -depth x</code> 选项，那么 push 到别的remote的时候会遇到</a></h2>
<pre><code class="language-shell">
  ! [remote rejected]       master -&gt; master (shallow update not allowed)
</code></pre>
<p>解决方法：</p>
<p>https://stackoverflow.com/questions/28983842/remote-rejected-shallow-update-not-allowed-after-changing-git-remote-url</p>
<h2 id="报告交流用的pptslides需要准备中文和英文版本"><a class="header" href="#报告交流用的pptslides需要准备中文和英文版本">报告交流用的PPT/Slides需要准备中文和英文版本</a></h2>
<p>我们平时的交流，多数是讲中文，用中文的PPT。但是，现在也越来越多的有英语世界的交流。
有的时候需要用英文演讲英文slides，有的时候是需要提供几页的ppt素材给合作伙伴去国外做技术分享。
因此目前会默认要求所有的对外公开的 slides，最好自己准备全英文的版本。</p>
<p>同时英语要多多练习。说不定哪天实验室就来了英语世界的技术人员交流（常有的事情）。</p>
<h2 id="如何为一个新的项目建立cicd机制"><a class="header" href="#如何为一个新的项目建立cicd机制">如何为一个新的项目建立CI/CD机制</a></h2>
<p>凡是由于项目交付压力在深夜掉头发的人，都会知道一个自动化的、有效运行的CI/CD机制是多么能够抚慰心灵。</p>
<p>以 Clang/LLVM 项目为例，介绍如何自己搭建一个CI/CD。</p>
<ol>
<li><strong>0x00 准备工作</strong></li>
</ol>
<p>首先，代码需要有版本管理。而版本管理现在基本上都是 git。其他管理工具都是蕾丝，只要有命令行工具就OK。</p>
<ol start="2">
<li><strong>0x01 完成敲回车就一条龙完成的脚本</strong></li>
</ol>
<p>第二，现在的代码仓库是需要能够被手工构建成功的。如果本身自己手工都还没有构建成功，就先停下来手头的工作，
把这件事情做好。可能有同学会问，有很多组件和函数都还没有实现，怎么办？答案是写一系列的空的函数，
能够保证其他部分可以正常被编译，最低要求是可以被编译构建成功，稍微进一点的要求是可以有一个固定的正确但是没用的返回结果，
让其他部分的构建和测试用例可以完成。</p>
<p>手工可以构建完成之后，接下来就是写到一个脚本里。以 clang/llvm 为例，一般的流程是：</p>
<pre><code class="language-shell">
  # clone # 下载
  # checkout # 到正确的分之
  # status # 检查是否 clean
  # git submodule update -r -f --init # 如果有子仓库
  mkdir build
  cd build
  cmake -DXXX_XX=YYY ..
  make -j $(nproc)
  make check # or make test 就是帮助运行回归测试
</code></pre>
<p>在一个新开的 terminal 中，完成以上一系列行为。然后用 <code>shell</code> 命令，复制下来，到一个 build.sh 中，编辑。</p>
<p>简单但是非常重要的一个验证是，切换到另一个目录下，运行 build.sh 看看是否可以成功构建。如果可以，那么进入下一步。</p>
<p>到目前为止，已经有了一个比较好用的脚本，可以方便的进行构建了。</p>
<ol start="3">
<li><strong>0x02 只有一个 git remote</strong></li>
</ol>
<p>假设没有gitlab也没有github，所有人的代码都是（或许有人工review后）push到一个分支，假设是 develop。</p>
<p>那么至少可以做自动化的是推送后的构建测试。写个 for 循环：</p>
<pre><code class="language-shell">
  # Clone

  # clone # 下载
  # checkout # 到正确的分之
  # status # 检查是否 clean
  while sleep 600 # 每隔10分钟
  do
      git pull
      ./build.sh || notify-or-send-mail
  done
</code></pre>
<p>就完成了最为简单的推送后CI测试。</p>
<p>没错的，就是这么简单的。没有什么花哨的概念。</p>
<p>核心是：
（1）挂了有人看有人及时修复，主线分支不修复好，禁止推送新代码；
（2）build.sh 跟这个循环的内容都需要跟项目的开发变更一起更新。</p>
<ol start="4">
<li><strong>0x03 使用 gitlab CI/CD：写配置文件</strong></li>
</ol>
<p>有了上一步的脚本之后。剩下来的工作就简单了。</p>
<p>注意，这里的做法跟官方和网上常见的做法都是不同的：这里教授的是 <strong>个人或十人以下小团队</strong> 从没有CI到有CI痛苦和麻烦程度最小的途径。
等CI建立起来之后，可以再琢磨如何使用更为正统和docker的方式来进行。</p>
<p>如果项目有一个 gitlab，那么在项目根目录放一个 .gitlab-ci.yml 这是例子</p>
<pre><code class="language-shell">
  $ cat .gitlab-ci.yml

  before_script:

  build:
    stage: build
    tags:
      - rvv-llvm # 用来指定构建runner的

    script:
      - ./build.sh

  $ cat build.sh
  set -e
  mkdir build
  cd build
  cmake -DLLVM_TARGETS_TO_BUILD=&quot;X86;RISCV&quot; -DLLVM_ENABLE_PROJECTS=&quot;clang;compiler-rt;lld&quot; -G Ninja ../llvm
  ninja
  ninja check
</code></pre>
<ol start="5">
<li><strong>0x04 使用 gitlab CI/CD：配置 runner</strong></li>
</ol>
<p>然后就是设置 gitlab-runner。</p>
<p>首先假设是 linux。别的系统请自己折腾。</p>
<p>按照 https://docs.gitlab.com/runner/install/linux-manually.html
国内请务必直接（可能要海外）下载一个二进制然后就开始干，不要用 apt 来安装，很慢。</p>
<p>之后进入项目的配置主页（需要是 gitlab 这个项目 maintainer 以上的人）
项目页面左下角 Settings - CI/CD
展开 Runners
看到</p>
<pre><code class="language-shell">
  Set up a specific Runner manually
  Install GitLab Runner
  Specify the following URL during the Runner setup: 【你要复制粘贴的网址】
  Use the following registration token during setup: 【一会儿要用到的token】
</code></pre>
<p>然后按照
https://docs.gitlab.com/runner/install/linux-manually.html
和
https://docs.gitlab.com/runner/register/
进行注册。注册时候就要用到刚才显示的网址和token。</p>
<p>注意会要求输入 <strong>tag</strong> 这个 tag 是跟上文中 gitlab-ci 文件中的 tag 对应的。是 runner 的筛选机制。</p>
<p>同时运行环境的时候选择 <strong>shell</strong> 。注意这里的前提是简单，而且所有有推送权限的人都是可以信任的。
否则有 git 推送权限的人有可能控制 shell 模式 gitlab runner 所在的机器。
当然，这里我们只是个人使用或者微型团队，此类RCE问题不考虑。</p>
<p>之后并不会立即启动，而是需要使用</p>
<pre><code class="language-shell">
  sudo gitlab-runner start
</code></pre>
<p>类似的命令（我记不清了）来启动。启动之后就会看到一些输出了。同时请务必在 tmux 中进行，避免掉线。</p>
<p>接下来就可以从repo页面的左边的 CI/CD - jobs 看到运行结果了。</p>
<p>一开始可能会有一些问题，常见的有：</p>
<p>没有 runner，卡住。（1）查看runner跟gitlab站点的通信时间，是否成功链接上了；（2）查看是否 tag 是匹配的。</p>
<p>脚本执行过程错误。恭喜，这里环境就已经构建好了。根据错误提示，判断是代码提交的bug（那就开issue）或者解决脚本自己的bug（分析、修改）</p>
<ol start="6">
<li><strong>0x05 搞定了，然后持续维护起来</strong></li>
</ol>
<p>坏了就赶紧修。这是CI/CD的第一原则。可能也是唯一普遍使用的原则。</p>
<p>TODO 加入更高级和PLCT实际使用部署的环境。</p>
<h2 id="如何快速有效的处理开源社区邮件列表中一天超1000封的邮件洪水"><a class="header" href="#如何快速有效的处理开源社区邮件列表中一天超1000封的邮件洪水">如何快速有效的处理开源社区邮件列表中一天超1000封的邮件洪水</a></h2>
<p>首先，不要慌。 Don't Panic。</p>
<p>第二，使用 GMail，或者其他有着大容量的邮件系统。</p>
<p>第三，使用 GMail 中的 filter 功能，将邮件按照邮件列表进行分类，同时可以选择不丢弃到垃圾邮件箱。这点比较重要。</p>
<p>第四，使用过滤器将自己关注的发信者（例如直接 review 你的 patch 的 maintainers）过滤出来，加上「重要」或者别的标签，方便查询。</p>
<p>第五，使用 Thread 模式来查看邮件。要知道邮件列表做review的时候，常常一个 patch set 是 00/99 这样的规模。而 reviewer 会很仔细的一个一个的回复。使用 flatten 模式按日期排序的话，你会疯掉的。</p>
<p>第六，明确自己的目标，根据标题快速删除掉/已读掉自己不感兴趣的方向的邮件。</p>
<p>第七，对于自己感兴趣的邮件，一定要先阅读 cover letter。也就是编号为 00/xx 的邮件。这是patch作者手工写的对自己的 patch set 的介绍。</p>
<p>第八，使用 Thunderbird 的离线收取模式进行收取，再批量进行删除操作，再上线。这么做其实是由于国内的高墙，导致很多时候批量操作会失败，尤其是当你已经有了一个很大的邮件池子的时候。</p>
<p>第九，每天都要筛选和学习。隔几天一看，如山的规模，就丧失斗志了。</p>
<h2 id="使用python的时候一定记得创建-venv--virtualenv"><a class="header" href="#使用python的时候一定记得创建-venv--virtualenv">使用Python的时候，一定记得创建 venv / virtualenv</a></h2>
<p><strong>实际上这已经重要到可能超越了技巧，而是形成了规则了。</strong></p>
<p>我们在开发中会借助各种开源软件工具，或者历史遗留代码。不同的代码中会有不同的操作系统要求、libc版本要求、工具链版本要求等。</p>
<p>python 其实也有要求，例如python2和python3的需求。尤其是如果做自动化测试又做深度学习，那么相信你的机器很快就会遇到python环境崩溃的问题了。</p>
<p>这里的一个血泪教训就是所有的python项目都需要使用 venv 来进行，同时注意避免引用系统的python库。</p>
<p>FIXME：或许我需要做一期视频讲座，邀请几位同事来镜头前现场流泪控诉下自己在两个项目交替进行的时候被浪费掉几十个小时的时间的。</p>
<h2 id="如何交换wip代码使用-patch不要直接传递文件"><a class="header" href="#如何交换wip代码使用-patch不要直接传递文件">如何交换WIP代码：使用 patch，不要直接传递文件</a></h2>
<p>有时候我们团队开发需要相互交流代码。最为正式的方式是发起 PR / MR，在标题中注明 RFC 或 WIP。这里 RFC 是 req for comments 的意思。</p>
<p>内部松散一点的代码是可以通过push到个人的repo或者branch上进行交流的。这也是我推荐的方式：在repo中的代码是活的，脱离了repo的代码是死掉的尸体。</p>
<p>在老派的社区中，以及偶尔的外部开发者之间，我们使用邮件或者微信、QQ等形式来发送的时候，可能推荐的方法不好使用。那么这时候就需要用 patch。</p>
<p>patch 可以用 git diff 或者 git format-patch 来生成。</p>
<p>patch set 是对应着一个 branch 上一系列的 commits。用 patch set 组织代码更加清晰，patch更小，容易 review。同时， <strong>要注意，每一个patch都要求不破坏项目的构建和回归测试，不然的话，后续的 git bisect 会造成干扰。</strong></p>
<p>patch 还有一个我们非常看重的要素，就是注明了作者是谁。而直接传递文件，对于调试和确认两遍的代码是不是一致，带来了巨大的隐患。同时，也无法将贡献者的荣耀落于作者之上。</p>
<p>对于员工是严格进制直接文件来回拷贝的。对于实习生，我们的要求要宽松一些，尽量使用 patch。LV2以下员工如果 git 操作不熟练，或者传递的是 docx 等二进制文档等，那么则通过文件名添加版本号和文件内的修订记录来进行区分和跟踪。</p>
<h2 id="已经提交了-prmr-的-branch-和-repo避免删除或撤销"><a class="header" href="#已经提交了-prmr-的-branch-和-repo避免删除或撤销">已经提交了 PR/MR 的 branch 和 repo，避免删除或撤销</a></h2>
<p>已经提交MR或者PR给mentor/reviewer审核的代码，默认是禁止撤销的。尤其是已经被review、留下了评论意见之后。
撤销了。我花时间写的review意见就悬空了。这样对于我在内的任何reviewer都是不礼貌的。
在upstream社区做事尤其要注意。
删除自己的仓库也是同样的，会导致评论针对的branch/commits丢失，是不礼貌的。</p>
<h2 id="出差"><a class="header" href="#出差">出差</a></h2>
<h3 id="高铁杭州东站"><a class="header" href="#高铁杭州东站">高铁/杭州东站</a></h3>
<ul>
<li>出发层进站之后，A28那一头有报销凭证的机器，共5台，平时没有人排队。比B11旁边的自动取票机要好很多（B11那里总是排队）。</li>
<li>注意出发层站内的改签窗口（B11旁边），八点前不开门。这是唯一的改签地点。如果到的很早，那么技巧是（1）手机订票；（2）不要取报销凭证；（3）进站前或快到的时候用手机改签，可以改签30分钟后的车次。</li>
<li>有广发银行还是某某银行的VIP休息区，可以休息（不过好像人比较满一直）。</li>
<li>星巴克在 B28 方向。</li>
</ul>
<h3 id="高铁上海虹桥"><a class="header" href="#高铁上海虹桥">高铁/上海虹桥</a></h3>
<ul>
<li><strong>一定要注意出发层的洗手间是有两个出入口。</strong> 带小孩子的同事尤其需要注意，极其容易在厕所出来的时候走散。</li>
<li>报销凭证建议出发层刷完身份证之后再取，临上车或下车之后再取，方便改签。</li>
<li>从张江高科去虹桥非常远，请至少保持2个小时的通勤时间。地铁稳定在 1.5 小时内到达。</li>
</ul>
<h2 id="b站评论讨论技巧"><a class="header" href="#b站评论讨论技巧">B站评论/讨论技巧</a></h2>
<ul>
<li>B站现在可以识别时间轴。在评论中插入类似 <code>23:33</code> 这样的信息就可以得到一个跳转到对应时间的 link。</li>
</ul>
<h2 id="发邮件等的文件名"><a class="header" href="#发邮件等的文件名">发邮件等的文件名</a></h2>
<ul>
<li>如果是报告的录像记录，那么使用 <code>202011xx - 姓名 - 报告题目</code> 的形式保存，发给我。</li>
<li>如果是给行政秘书或者mentor发送，是信息收集性质的，那么不要写 <code>合同.zip</code>  这样的名字，而是用 <code>你的名字-具体事项.zip</code>。这么做的好处是我可以直接从邮件附件中下载，不需要修改文件名。如果同时要收集30个人的信息，每个人都用 <code>信息.zip</code> 发给我，我就疯了。</li>
</ul>
<h2 id="创建一个仓库整理自己的公开报告"><a class="header" href="#创建一个仓库整理自己的公开报告">创建一个仓库，整理自己的公开报告</a></h2>
<p>各位有兴趣可以把自己的报告的链接整理整理，像</p>
<p>https://github.com/lazyparser/talks</p>
<p>一样建立一个GitHub repo。将自己做的报告从 PLCT-Open-Reports 中复制一份出来，方便以后写简历或者跟人介绍的时候使用。</p>
<p>我从2016年开始记录的。这个想法来自于 jserv 老师，模仿自 gh/jserv/talks</p>
<h2 id="下一个技巧欢迎提交-pull-requests"><a class="header" href="#下一个技巧欢迎提交-pull-requests">下一个技巧，欢迎提交 Pull Requests</a></h2>
<p>下一个技巧，欢迎提交 Pull Requests</p>
<h1 id="写-bash--python-脚本注意事项"><a class="header" href="#写-bash--python-脚本注意事项">写 Bash / Python 脚本注意事项</a></h1>
<h2 id="不要使用绝对路径"><a class="header" href="#不要使用绝对路径">不要使用绝对路径</a></h2>
<p>编写脚本时,经常会在脚本中添加路径,比如编译一个特定目录的C文件,这时候不要直接将
自己的文件路径添加到脚本中,因为不同机器在运行时对应的路径可能存在差别,导致整个
脚本运行失败。</p>
<p>正确的方法是用变量来定义路径,并把绝对路径替换成相对路径。</p>
<p>对于交叉工具链，用脚本下载解压</p>
<p>当需要使用交叉工具链时,应该先从Ubuntu的launchpad或者Linaro官网上找,不要使用
百度云中的工具链资源,因为百度云中的资源可能有后门漏洞,无法确保安全性。使用交叉
工具链应该在脚本中依次：下载-&gt;解压-&gt;配置环境-&gt;使用。这样做在仓库中只有我们写的
脚本代码，不存在编译器的tar包，提高工作效率。</p>
<p>MORE @pandora</p>
<p>TODO</p>
<h2 id="使用-python3"><a class="header" href="#使用-python3">使用 Python3</a></h2>
<p>没啥好说的。 Python2 已经死了。</p>
<h2 id="尽量不要修改用户的环境配置"><a class="header" href="#尽量不要修改用户的环境配置">尽量不要修改用户的环境配置</a></h2>
<p>在脚本中尽量不要改变用户的环境配置,例如.bashrc、/etc/profile等,因为可能产生意
想不到的问题出现。建议使用export单独修改当前环境,脚本运行完成后对环境不产生其他
影响,雁过不留痕。</p>
<h2 id="对环境有副作用的操作要考虑是不是幂等的"><a class="header" href="#对环境有副作用的操作要考虑是不是幂等的">对环境有副作用的操作要考虑是不是幂等的</a></h2>
<p>幂等指的就是一个操作多次重复产生的效果都是相同的,在脚本中许多情况下都需要注意将
操作修改成幂等的。例如,用脚本建立一个文件夹 <em>mkdir test</em> ,当第二次运行脚本时就会
出现已经有<code>test</code>这个文件夹无法生成的问题,所以对环境有副作用的操作需要考虑操作是
不是幂等的。</p>
<p>正确操作示例：</p>
<pre><code class="language-shell">
    DIR = test
    if[ -e ${DIR}]
    then
        echo ${DIR} exist
    else
        mkdir test
    fi
</code></pre>
<h2 id="命令行历史--一个循环"><a class="header" href="#命令行历史--一个循环">命令行历史 + 一个循环</a></h2>
<p>第一是战术层面的【写个 for 循环】：重复性的工作，上面的重复性的工作，是不是可以写一个 for 循环来做？</p>
<ol>
<li>简单的方法是，在你的电脑上，只用一个 terminal 来一步一步完成所有的工作。</li>
<li>然后用 history 命令看到整个命令序列，复制粘贴到一个 editor 中。</li>
<li>写一个 while true; do [...你的命令行历史]; sleep 500; done 的循环</li>
<li>找个新目录，或者新的虚拟机来测试验证下，看看是否OK。</li>
<li>根据错误提示，思考，修改，try harder</li>
</ol>
<h2 id="分治法将环境初始化工作和重复性工作分开"><a class="header" href="#分治法将环境初始化工作和重复性工作分开">分治法：将环境初始化工作和重复性工作分开</a></h2>
<p>这个方法就是经典笑话【将大象装进冰箱需要几步？（答案是3步：打开冰箱门；塞进大象；关上冰箱门】</p>
<p>而你现在做的事情是 【 确定哪些仓库和分支需要编译和测评，clone 下来编译一边确保配置没错误了； 写个循环♻️不停的 pull - build/compile - run tests - upload results/log； （不用关上冰箱门）】
根据这个思想，重新看自己的命令行历史，看看</p>
<ol>
<li>哪些应该在循环之内，哪些应该在之外执行？</li>
<li>是否漏掉了一些环境变量或者前提条件？</li>
</ol>
<h1 id="常用的术语表"><a class="header" href="#常用的术语表">常用的术语表</a></h1>
<p>一些日常沟通的团队用语。</p>
<ul>
<li>PLCT: 程序语言与编译技术实验室，隶属于ISRC</li>
<li>y站：是指团队内部使用的gitlab系统。由于历史原因使用了一个y开头的缩写，所以建成y站。</li>
<li>B站：<a href="https://www.bilibili.com">B站</a> <a href="https://space.bilibili.com/296494084">往期技术报告传送门</a></li>
<li>q站: <a href="https://q.droid.ac.cn%3E">q站</a> 是软件所机器人团队维护的机器人开发社区。</li>
<li>t站： 是软件所工业仿真团队的内部系统站点。</li>
<li>gh：是GitHub的缩写。</li>
<li>gh/isrc：是 <a href="https://github.com/isrc-cas">isrc-cas</a> 的缩写。</li>
<li>LV2、LV3、LV4: 是对实习生的能力等级划分。 <a href="https://github.com/lazyparser/weloveinterns/blob/master/how-do-we-rank-interns.md">link</a></li>
<li>mentor: 导师，上司</li>
<li>lord、领主：是团队内部带有项目管理的资深成员的称呼。</li>
<li>fief：每个 lord 都有自己的 fief。</li>
<li>owner: 一个仓库或者项目的负责人。owner可以是lord也可以不是（虎级项目不用是lord）。</li>
<li>DDL、Due: DDL(deadline)任务完成的截止日期，Due 任务负责人</li>
<li>LGTM：Looks good to me。在 code review 和讨论中表示认可，不会阻止。</li>
<li>OTOH：On The Other Hand，另一方面，换一个角度来说。</li>
<li>btw：by the way。顺带一提。</li>
<li>tiger、whale、dragon：用来从低到高表示三类不同的项目划分。没有外部交付要求的项目属于 tiger 级，一般是新人的培训项目以及毕业设计；whale是有外部交付但是交付时间不严格的开源项目。例如 rvv-llvm 和 pacific 都属于 whale 级；dragon 是指有严格交货日约束以及有商业保密要求的项目。所有商业类交付都属于 dragon 级。OTOH，由于在y站也进行了不同的群组区分，所以 tiger 一般是指全体员工和学生。</li>
<li>代码尸体：参考 <a href="./rules.html">rules</a></li>
<li>本部：是指软件所北京本部。</li>
<li>江浙沪小队/江浙沪皖小队：是指PLCT在江浙沪皖四个城市的小伙伴组成的项目小组。经常承接长三角地区的项目委托，进行现场支持。</li>
<li>南京小队：坐标位于南京分院的PLCT小分队。具体做的项目是各自不同的。</li>
<li>ISRC：智能软件研究中心，隶属于ISCAS</li>
<li>ISCAS： 中国科学院软件研究所</li>
<li>upstream：这是个泛指，通常作为名词是指开源代码项目的官方社区；作为动词是表示将PLCT的成果提交给上游社区。</li>
<li>歧义指代：是指从上下文剥离出来之后无法知道具体指代的客体是什么的话。例如「这个、那个、上次、昨天」等。</li>
</ul>
<h1 id="进行实习准备"><a class="header" href="#进行实习准备">进行实习准备</a></h1>
<p>看到这里，那么我相信你已经想要加入PLCT进行实习了，并且已经知道LV的含义和需要达到的能力。这里是一些具体的要求点。</p>
<ul>
<li>首先C/C++/Java至少需要熟练一种。</li>
<li>Linux命令行要用熟练。win10现在有WSL2，可以直接安装Ubuntu。</li>
<li>Bash脚本编程需要掌握一些。找本Bash脚本编程的书，过一遍。</li>
<li>Git使用要熟练。</li>
<li>可以看看MIT的 missing course，<a href="https://www.bilibili.com/video/BV1H7411K7pZ">B站搬运 BV1H7411K7pZ</a></li>
<li>LV2 及以上需要复习过一边数据结构和算法的基础知识。</li>
<li>LV3 及以上需要复习一遍操作系统原理和编译器原理。</li>
<li>LV4 及以上要求的综合实力比较多，短期准备不了什么。进入PLCT之后慢慢锻炼吧。</li>
<li>上机考试环境是ssh远程登陆进入Linux系统，使用tmux进行屏幕分享。事先熟悉下tmux。</li>
<li>技术分享面试要求在一周左右时间内进行一次技术分享，考察能力和动机。能力可能无法短期内提高，但是报告本身很能体现出来报告人的用心和细致程度。上机考试是准入淘汰，技术分享是择优录用。所以请务必用心。</li>
<li>多搜集公开情报，从PLCT的开源仓库和活动中搜集自己感兴趣的信息。PLCT同时在进行很多有意思有挑战性的项目，如果你在面试的时候就已经很庆祝自己想做什么，那么被录用的可能性就很大。</li>
</ul>
<h2 id="关于plct的薛定谔实习工资的说明"><a class="header" href="#关于plct的薛定谔实习工资的说明">关于PLCT的薛定谔实习工资的说明：</a></h2>
<p>时间上，每个月10号ww会提交全体成员的工资表给部门，部门20号前提交给软件所，软件所30号左右发出来到各位的建设银行卡。</p>
<p>数额上，完全由外部可见交付物决定。目前浮动区间是下限是0，上限是11k。中位数预期是LV∂ 对应∂k/mo。</p>
<p>交付物，是指【外部可见】的交付物，包括在各个开源项目（upstream）上的 non-trivial PR/Issues讨论等、gh/isrc-cas 或者 gh/x-riscv 的公开贡献、知乎文章、B站技术报告视频等。统计以每个月1号和16号「PLCT开源进展」的列出条目作为主要参考。</p>
<p>时效性，有一定的延迟，也就是说12月30日的数额是对应11月初～12月初的产出。如果12月产出爆炸，那么会在1月10日统计提交，1月30日数额体现。</p>
<p>由于年底封帐，12月份提交时间提前为12月4日。</p>
<h2 id="ai编译器方向的一些学习资源"><a class="header" href="#ai编译器方向的一些学习资源">AI编译器方向的一些学习资源：</a></h2>
<p><a href="https://zhuanlan.zhihu.com/p/163717035">阿里PAI团队《AI编译优化》不错的系列文章。</a></p>
<h2 id="虚拟机分支的同学应当看过或掌握的内容"><a class="header" href="#虚拟机分支的同学应当看过或掌握的内容">虚拟机分支的同学应当看过或掌握的内容</a></h2>
<p><a href="https://www.youtube.com/watch?v=QnQYhrpX39M&amp;list=PLJq3XDLIJkib2h2fObomdFRZrQeJg4UIW">Mario Wolczko @ VMSS16: A Concise and Opinionated History of Virtual Machines</a></p>
<p>90分钟时间，介绍了虚拟机发展的一些历史，是系统性了解虚拟机历史发展很好的入门阅读。</p>
<p><a href="https://www.youtube.com/watch?v=Hqw57GJSrac&amp;list=PLJq3XDLIJkib2h2fObomdFRZrQeJg4UIW&amp;index=2">Cliff Click @ VMSS16: Bits of Advice For the VM Writer</a>
Must Read</p>
<h2 id="risc-v-相关的内容"><a class="header" href="#risc-v-相关的内容">RISC-V 相关的内容</a></h2>
<p><a href="https://www.youtube.com/watch?v=pfM1WUWbfBs">Chisel Quick Tutorial - 1st RISC-V Bootcamp</a></p>
<p>2015年的第一次（？）公开有记录的 Chisel 介绍。现在已经有了很大的不同。如果是做 Chisel/FIRTTL 相关的实习生，那么值得看一看。</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        

                        

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                

                
            </nav>

        </div>

        

        

        

        
        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        

        

        
        <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>
        

        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        

        
        
        <script type="text/javascript">
        window.addEventListener('load', function() {
            window.setTimeout(window.print, 100);
        });
        </script>
        
        

    </body>
</html>
